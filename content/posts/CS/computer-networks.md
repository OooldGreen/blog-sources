---
title: "计算机网络" #标题
date: 2022-11-14T15:57:02+08:00 #创建时间
lastmod: 2022-11-28T19:00:00+08:00 #更新时间
categories: ["CS"]
tags: ["CS","Class Note",'Computer Network']
description: "Computer Network is a MOOC class." #描述
weight: # 输入1可以顶置文章，用来给文章展示排序，不填就默认按时间排序
draft: false # 是否为草稿
# comments: true #是否展示评论
# showToc: true # 显示目录
# TocOpen: true # 自动展开目录
# hidemeta: false # 是否隐藏文章的元信息，如发布日期、作者等
# disableShare: true # 底部不显示分享栏
# showbreadcrumbs: true #顶部显示当前路径
# cover:
#     image: "" #图片路径：posts/tech/文章1/picture.png
#     caption: "" #图片底部描述
#     alt: ""
#    relative: false
---

《计算机网络（自顶向下方法 第7版，James F.Kurose，Keith W.Ross）》 [课程](https://b23.tv/u8AvdXv) 是 2020 年秋科大自动化系本科课程录制版。在介绍计算机网络体系架构的基础上，自上而下、以互联网为例系统地阐述了网络体系结构各层次的主要服务、工作原理、常用技术和协议，包括应用层、传输层、网络层、数据链路层和物理层，最后是网络安全原理和协议。

# 计算机网络和互联网
Internet：是一堆的网络，通过一系列网络交换节点互联互通，向用户提供服务。互联网是分布式的应用进程和提供通信服务的基础设施（应用层以下都是）。

Internet 标准：
- RFC
- IETF

互联网组成：  
- 节点
    - 节点及主机上的应用程序
    - 路由器（网络层）、交换机（链路层）等网络交换设备
- 边
    - access 接入网链路
    - backbone 主干链路
- 协议：根据协议发出请求和接受请求，按照规范解析报文。协议规范了语法、语义、时序、动作四个方面。

互联网的三个子系统：  
- 边缘 (edge) ：存在网络应用和支撑其运行的协议栈
- 核心 (core) ：进行数据交换，是由路由和交换机构成的分布式系统
- 接入 (access)：把边缘接入到网络核心，通过网络核心将数据发送给目标主机，可以有有线或无线通信链路

## 网络边缘 (edge)
### 应用进程之间的通信模式
- 客户端/服务器模式 (CS 模式)
    - 资源在服务器，以服务器为主，服务器支撑，由客户端向服务器请求资源
    - 典型的主从模式
    - 缺点：服务器压力大，服务器通信消耗大，服务器宕机影响大，性能随业务量增加断崖式下降
- 对等 (peer-peer, P2P) 模式
    - 很少（甚至没有）专门的服务器，每个节点既是客户端，又是服务器

### 面向连接的服务
目标是在端系统之间传输数据。需要在数据传输之前做好准备（握手），例如 TCP 协议。

TCP 服务的特性：
- 面相连接
- 可靠的（不重复、不失序、不出错、不丢失）
- 流量控制（协调发送方发送速度和接收方接收速度）
- 拥塞控制（考虑网络路径的通行能力）
- 应用场景：可靠性要求高的应用

UDP（用户数据报）服务的特性：
- 无连接的服务，不需要握手
- 不可靠
- 无流量控制，无拥塞控制
- 快速
- 将端口细分到进程到进程
- 应用场景：实时流媒体，远程会议，域名解析等

## 网络核心 (core)
关键功能有路由和转发

**1. 电路交换** 

端到端的资源被分配给从源端到目标端的呼叫 "call"，为每个呼叫预留一条专有通道进行数据交换。

每条链路被分为若干不同的 pieces，每个呼叫分配独享的链路，资源专用，不共享，这样连接一建立起来就能保证性能，但是会有资源浪费的缺陷，通常被传统电话网络采用，不太适合计算机之间的通信。

将带宽分成片的方法：频分 (FDM)、时分 (TDM)、波分 (WDM)

不适合计算机之间通信的原因：
- 连接建立时间长
- 计算机之间通信有突发性，浪费的片较多（独享链接没有被使用的时候也无法被别的呼叫使用）
- 可靠性不高

**2. 分组交换**

以分组 (package) 为单位，在每一个单位节点经历存储再转发，使用带宽的全部，资源共享，按需使用。

统计多路复用：分组没有固定的模式

数据存储-转发的方式：
- 数据报网络：无连接，每个分组传送是独立的，标识完整的目标主机地址，直接传输。
- 虚电路网络 (virtual circuit)：有连接，先握手，在交换节点之间先建立虚拟的电路，确保网络层的连接，然后每个分组携带虚电路号进行存储转发。虚电路靠信令建立起来。

> 有连接和面向连接：
> - 有连接体现在每一跳的节点上都是有连接的。 
> - 面向连接只体现在发送和接收端连接

优点：
- 支持的用户更多
- 共享性
- 适合突发式的数据传输

缺点：
- 时延是在每个交换节点中存储的时间之和 和 不太确定的排队时延
- 如果路由器缓存用完了，分组将会被抛弃（丢包）
- 过度使用会造成网络拥塞

## 接入网 (access)

1. modem：调制解调器
2. DSL/IDSL：仍然用调制解调的方式，用 4kHz 以上的带宽，分上行和下行链路
3. 线缆网络：有线电缆双向改造，在不同频段传输不同信道的数据，上下行
4. 家庭网络
5. 企业接入网络：直接接到以太网路交换机上

无线接入网络：
- Wlan
- 广域无线接入 (wide-area，蜂窝网络、3G、4G、5G等)
- 无线局域网 WIFI

物理媒体：
- 导引型媒体：有形的
    - 例如同轴电缆（两根同心的铜导线）、光纤（单/多模）、光缆、双绞线
    - 低误码率，双向，高速，安全
- 非导引型媒体：传输电磁波，携带要传输的数据
    - 例如地面微波、LAN、wide-area、卫星等
    - 无需物理“线缆”，双向，有反射、吸收、干扰

---

互联网结构
- 端系统通过接入 ISPs (Internet Service Providers) 连接到互联网，ISP 也要互相连接，但每两个 ISP 互相连接不具有扩展性，可以将每个接入 ISP 都连接到全局 ISP (Global ISP)，客户 ISPs 和提供者 ISPs 有经纪合约
- ISP 之间合作可以完成业务的扩展，对等互联 (peer linking) 的结算关系
- 多个 ISP 接入入互联网交换点 IXP (Internet exchange point)
- 内容提供者 ICP (Internet Content Providers) 费用高，范围有限，需要部署 DC (data center)，通常部署在离 ISP 较近的地方，用专用线缆连在一起

互联网层次结构是松散的：
- 中心：第一层 ISP，国家覆盖，效率极高
- 第二层 ISP：更小些的（通常是区域性的）ISP
- 第三层：Local ISP
- ICP等

ISP 之间的连接：
- POP：高层 ISP 向低层接入，涉及费用结算
- 多宿 (multi home)：低层 ISP 向多个高层 ISP 接入
- IXP：对等连接，通常不涉及费用结算
- ICP自己部署的专用网络，同时和各级 ISP 连接


## 延时、丢失和吞吐量分析
分组延时
1. 节点处理延时  
2. 排队延时  
    根据当时网络情况  
    流量强度 = L*a/R  
    流量强度趋近于 0，排队延时很小；流量强度趋近于 1，延时变得很大，趋近于无穷大；设计系统时流量强度不能大于 1。
3. 传输延时：L/R
4. 传播延时：d/s  

分组丢失：链路的队列缓冲区容量有限，分组到达一个满的队列就会被丢失，丢失的分组可能会被前一个节点或源端系统重传也可能根本不重传

吞吐量：在源端和目标端之间传输的速率（数据量/单位时间）  
瓶颈链路：端到端路径上，限制端到端吞吐的链路  

## 协议层次
